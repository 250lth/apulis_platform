const Koa = require('koa')
<<<<<<< HEAD
const Session = require('koa-session')
=======
const mount = require('koa-mount')
>>>>>>> c52a2da5411eb8408c7ce099ef8b64f0558cb564

const app = module.exports = new Koa()

require('./configurations/logger')(app)
require('./configurations/config')(app)

app.use(mount('/v2', require('./v2/router').routes()))
app.use(mount('/v2', require('./v2/router').allowedMethods()))

<<<<<<< HEAD
app.keys = ['some secret hurr...']
app.use(Session(app))

app.use(router.routes())
app.use(router.allowedMethods())
=======
app.use(require('./router').routes())
app.use(require('./router').allowedMethods())
>>>>>>> c52a2da5411eb8408c7ce099ef8b64f0558cb564

/* istanbul ignore if */
if (require.main === module) {
  app.listen(process.env.PORT || 3081, process.env.HOST)
}
